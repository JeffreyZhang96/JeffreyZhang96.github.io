<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/assets/css/0.styles.57314520.css" as="style"><link rel="preload" href="/assets/js/app.8e528a8b.js" as="script"><link rel="preload" href="/assets/js/3.82a49c19.js" as="script"><link rel="preload" href="/assets/js/1.0ab98803.js" as="script"><link rel="preload" href="/assets/js/15.fa9dfeb1.js" as="script"><link rel="prefetch" href="/assets/js/10.0d102bea.js"><link rel="prefetch" href="/assets/js/11.5e4a2761.js"><link rel="prefetch" href="/assets/js/12.aef8f1f6.js"><link rel="prefetch" href="/assets/js/13.5b2c2445.js"><link rel="prefetch" href="/assets/js/14.9521dcbd.js"><link rel="prefetch" href="/assets/js/16.695eba2a.js"><link rel="prefetch" href="/assets/js/17.a39d0ec9.js"><link rel="prefetch" href="/assets/js/18.b8b9dd64.js"><link rel="prefetch" href="/assets/js/19.d5b22499.js"><link rel="prefetch" href="/assets/js/20.b157b0b0.js"><link rel="prefetch" href="/assets/js/21.a122ea90.js"><link rel="prefetch" href="/assets/js/22.7fa65ea5.js"><link rel="prefetch" href="/assets/js/23.a95127d1.js"><link rel="prefetch" href="/assets/js/24.4c905bc9.js"><link rel="prefetch" href="/assets/js/25.231023bd.js"><link rel="prefetch" href="/assets/js/26.3968f588.js"><link rel="prefetch" href="/assets/js/27.bf6ef3e7.js"><link rel="prefetch" href="/assets/js/28.076b9ccc.js"><link rel="prefetch" href="/assets/js/29.dae1a67e.js"><link rel="prefetch" href="/assets/js/30.4257dfcc.js"><link rel="prefetch" href="/assets/js/31.685a3d09.js"><link rel="prefetch" href="/assets/js/32.b518b57c.js"><link rel="prefetch" href="/assets/js/4.542f8749.js"><link rel="prefetch" href="/assets/js/5.300a1aac.js"><link rel="prefetch" href="/assets/js/6.e09b9417.js"><link rel="prefetch" href="/assets/js/7.84bad2f8.js"><link rel="prefetch" href="/assets/js/8.4fe02f1b.js"><link rel="prefetch" href="/assets/js/9.6d6b0fe4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.57314520.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-418054de><div data-v-418054de><div id="loader-wrapper" class="loading-wrapper" data-v-71fac282 data-v-418054de data-v-418054de><div class="loader-main" data-v-71fac282><div data-v-71fac282></div><div data-v-71fac282></div><div data-v-71fac282></div><div data-v-71fac282></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-5d8855ac data-v-418054de data-v-418054de><h3 class="title" style="display:none;" data-v-5d8855ac data-v-5d8855ac></h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-5d8855ac data-v-5d8855ac><input type="password" value="" data-v-5d8855ac> <span data-v-5d8855ac>Konck! Knock!</span> <button data-v-5d8855ac>OK</button></label> <div class="footer" style="display:none;" data-v-5d8855ac data-v-5d8855ac><span data-v-5d8855ac><i class="iconfont reco-theme" data-v-5d8855ac></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-5d8855ac>vuePress-theme-reco</a></span> <span data-v-5d8855ac><i class="iconfont reco-copyright" data-v-5d8855ac></i> <a data-v-5d8855ac><!---->
            
          <!---->
          2020
        </a></span></div></div> <div class="hide" data-v-418054de><header class="navbar" data-v-418054de><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="" class="logo"> <!----></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      基础
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTML/" class="nav-link"><i class="iconfont undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/CSS/" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/" class="nav-link router-link-exact-active router-link-active"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/TypeScript/" class="nav-link"><i class="iconfont undefined"></i>
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      通识
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/算法/" class="nav-link"><i class="iconfont undefined"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/网络/" class="nav-link"><i class="iconfont undefined"></i>
  网络
</a></li><li class="dropdown-item"><!----> <a href="/浏览器/" class="nav-link"><i class="iconfont undefined"></i>
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/操作系统/" class="nav-link"><i class="iconfont undefined"></i>
  操作系统
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/React/" class="nav-link"><i class="iconfont undefined"></i>
  React
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      高级
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/NodeJS/" class="nav-link"><i class="iconfont undefined"></i>
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/数据库/" class="nav-link"><i class="iconfont undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/优化/" class="nav-link"><i class="iconfont undefined"></i>
  优化
</a></li><li class="dropdown-item"><!----> <a href="/安全/" class="nav-link"><i class="iconfont undefined"></i>
  安全
</a></li><li class="dropdown-item"><!----> <a href="/图形/" class="nav-link"><i class="iconfont undefined"></i>
  图形
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link"><i class="iconfont undefined"></i>
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/git/" class="nav-link"><i class="iconfont undefined"></i>
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      项目
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mimall/" class="nav-link"><i class="iconfont undefined"></i>
  vue-mimall
</a></li><li class="dropdown-item"><!----> <a href="/weibo/" class="nav-link"><i class="iconfont undefined"></i>
  koa2-weibo
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/JeffreyZhang96" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-418054de></div> <aside class="sidebar" data-v-418054de><div class="personal-info-wrapper" data-v-949f496c><!----> <!----> <div class="num" data-v-949f496c><div data-v-949f496c><h3 data-v-949f496c>0</h3> <h6 data-v-949f496c>Article</h6></div> <div data-v-949f496c><h3 data-v-949f496c>0</h3> <h6 data-v-949f496c>Tag</h6></div></div> <hr data-v-949f496c></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      基础
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTML/" class="nav-link"><i class="iconfont undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/CSS/" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/" class="nav-link router-link-exact-active router-link-active"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/TypeScript/" class="nav-link"><i class="iconfont undefined"></i>
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      通识
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/算法/" class="nav-link"><i class="iconfont undefined"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/网络/" class="nav-link"><i class="iconfont undefined"></i>
  网络
</a></li><li class="dropdown-item"><!----> <a href="/浏览器/" class="nav-link"><i class="iconfont undefined"></i>
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/操作系统/" class="nav-link"><i class="iconfont undefined"></i>
  操作系统
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/React/" class="nav-link"><i class="iconfont undefined"></i>
  React
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      高级
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/NodeJS/" class="nav-link"><i class="iconfont undefined"></i>
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/数据库/" class="nav-link"><i class="iconfont undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/优化/" class="nav-link"><i class="iconfont undefined"></i>
  优化
</a></li><li class="dropdown-item"><!----> <a href="/安全/" class="nav-link"><i class="iconfont undefined"></i>
  安全
</a></li><li class="dropdown-item"><!----> <a href="/图形/" class="nav-link"><i class="iconfont undefined"></i>
  图形
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link"><i class="iconfont undefined"></i>
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/git/" class="nav-link"><i class="iconfont undefined"></i>
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      项目
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mimall/" class="nav-link"><i class="iconfont undefined"></i>
  vue-mimall
</a></li><li class="dropdown-item"><!----> <a href="/weibo/" class="nav-link"><i class="iconfont undefined"></i>
  koa2-weibo
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/JeffreyZhang96" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/#javascript" class="sidebar-link">JavaScript</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JavaScript/#基础知识" class="sidebar-link">基础知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#js-浮点类型的精确计算" class="sidebar-link">js 浮点类型的精确计算</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#js-中整数的安全范围是多少？" class="sidebar-link">js 中整数的安全范围是多少？</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#严格模式" class="sidebar-link">严格模式</a></li></ul></li><li><a href="/JavaScript/#数据类型" class="sidebar-link">数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#js-变量类型" class="sidebar-link">JS 变量类型</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#类型转换" class="sidebar-link">类型转换</a></li></ul></li><li><a href="/JavaScript/#引用类型" class="sidebar-link">引用类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#class" class="sidebar-link">[[class]]</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#string" class="sidebar-link">String</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#array" class="sidebar-link">Array</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#regexp" class="sidebar-link">RegExp</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#拷贝" class="sidebar-link">拷贝</a></li></ul></li><li><a href="/JavaScript/#函数" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#作用域" class="sidebar-link">作用域</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#执行上下文" class="sidebar-link">执行上下文</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#作用域链" class="sidebar-link">作用域链</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#作用域与变量声明提升" class="sidebar-link">作用域与变量声明提升</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#函数柯里化" class="sidebar-link">函数柯里化</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#立即执行函数（iife）" class="sidebar-link">立即执行函数（IIFE）</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#面向切片编程（aop）" class="sidebar-link">面向切片编程（AOP）</a></li></ul></li><li><a href="/JavaScript/#this" class="sidebar-link">this</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#优先级" class="sidebar-link">优先级</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#this-指向" class="sidebar-link">this 指向</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#call、apply、bind" class="sidebar-link">call、apply、bind</a></li></ul></li><li><a href="/JavaScript/#对象" class="sidebar-link">对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#属性值" class="sidebar-link">属性值</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#遍历对象的方法" class="sidebar-link">遍历对象的方法</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#私有实现" class="sidebar-link">私有实现</a></li></ul></li><li><a href="/JavaScript/#bom" class="sidebar-link">BOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#bom-与-dom-的关系" class="sidebar-link">BOM 与 DOM 的关系</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#bom-对象" class="sidebar-link">BOM 对象</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#history-对象" class="sidebar-link">History 对象</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#location-对象" class="sidebar-link">Location 对象</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#window-对象" class="sidebar-link">Window 对象</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#navigator-对象" class="sidebar-link">Navigator 对象</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#screen-对象" class="sidebar-link">Screen 对象</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#offsetwidth-offsetheight-clientwidth-clientheight-与-scrollwidth-scrollheight-的区别" class="sidebar-link">offsetWidth/offsetHeight,clientWidth/clientHeight 与 scrollWidth/scrollHeight 的区别</a></li></ul></li><li><a href="/JavaScript/#dom" class="sidebar-link">DOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#dom-事件级别" class="sidebar-link">DOM 事件级别</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#event-对象常见应用" class="sidebar-link">Event 对象常见应用</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#事件代理-委托" class="sidebar-link">事件代理/委托</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#如何阻止冒泡？" class="sidebar-link">如何阻止冒泡？</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#js-获取-dom-的-css-样式" class="sidebar-link">JS 获取 dom 的 CSS 样式</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#innerhtml、textcontent、innerhtml" class="sidebar-link">innerHTML、textContent、innerHTML</a></li></ul></li><li><a href="/JavaScript/#原型与原型链" class="sidebar-link">原型与原型链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#获取原型的方法" class="sidebar-link">获取原型的方法</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#instanceof-原理" class="sidebar-link">instanceof 原理</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#new-原理" class="sidebar-link">new 原理</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#求输出结果：" class="sidebar-link">求输出结果：</a></li></ul></li><li><a href="/JavaScript/#继承" class="sidebar-link">继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#原型链继承" class="sidebar-link">原型链继承</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#构造继承" class="sidebar-link">构造继承</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#组合继承" class="sidebar-link">组合继承</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#寄生组合继承" class="sidebar-link">寄生组合继承</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#es6-继承" class="sidebar-link">ES6 继承</a></li></ul></li><li><a href="/JavaScript/#ajax" class="sidebar-link">AJAX</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#手写-ajax" class="sidebar-link">手写 ajax</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#ajax-和-fetch-区别" class="sidebar-link">AJAX 和 fetch 区别</a></li></ul></li><li><a href="/JavaScript/#es6" class="sidebar-link">ES6</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#常用-es6-新特性" class="sidebar-link">常用 ES6 新特性</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#set-map" class="sidebar-link">Set Map</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#var、let-及-const-区别" class="sidebar-link">var、let 及 const 区别</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#es6-中箭头函数与普通函数的区别" class="sidebar-link">ES6 中箭头函数与普通函数的区别</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#for-in-和-for-of" class="sidebar-link">for in 和 for of</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#promise" class="sidebar-link">Promise</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#async-和-await" class="sidebar-link">async 和 await</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#generator-生成器" class="sidebar-link">Generator 生成器</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#生成器原理" class="sidebar-link">生成器原理</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#proxy" class="sidebar-link">Proxy</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#私有方法和私有属性" class="sidebar-link">私有方法和私有属性</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#代码分析题" class="sidebar-link">代码分析题</a></li></ul></li><li><a href="/JavaScript/#es2020" class="sidebar-link">ES2020</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#globalthis" class="sidebar-link">globalThis</a></li></ul></li><li><a href="/JavaScript/#事件" class="sidebar-link">事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#事件触发三阶段" class="sidebar-link">事件触发三阶段</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#注册事件" class="sidebar-link">注册事件</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#target-和-currenttarget" class="sidebar-link">target 和 currentTarget</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#onxxxx-事件与-addeventlistener-的区别" class="sidebar-link">onXXXX 事件与 addeventlistener 的区别</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#取消默认操作" class="sidebar-link">取消默认操作</a></li></ul></li><li><a href="/JavaScript/#正则表达式" class="sidebar-link">正则表达式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JavaScript/#设计模式" class="sidebar-link">设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#单例模式" class="sidebar-link">单例模式</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#观察者模式和发布订阅模式" class="sidebar-link">观察者模式和发布订阅模式</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-5d8855ac data-v-418054de><h3 class="title" style="display:none;" data-v-5d8855ac data-v-5d8855ac></h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-5d8855ac data-v-5d8855ac><input type="password" value="" data-v-5d8855ac> <span data-v-5d8855ac>Konck! Knock!</span> <button data-v-5d8855ac>OK</button></label> <div class="footer" style="display:none;" data-v-5d8855ac data-v-5d8855ac><span data-v-5d8855ac><i class="iconfont reco-theme" data-v-5d8855ac></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-5d8855ac>vuePress-theme-reco</a></span> <span data-v-5d8855ac><i class="iconfont reco-copyright" data-v-5d8855ac></i> <a data-v-5d8855ac><!---->
            
          <!---->
          2020
        </a></span></div></div> <div data-v-418054de><main class="page"><div class="page-title" style="display:none;"><h1>JavaScript</h1> <hr> <div data-v-0608c411><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="javascript"><a href="#javascript" class="header-anchor">#</a> <strong>JavaScript</strong></h2> <h2 id="基础知识"><a href="#基础知识" class="header-anchor">#</a> 基础知识</h2> <h3 id="js-浮点类型的精确计算"><a href="#js-浮点类型的精确计算" class="header-anchor">#</a> js 浮点类型的精确计算</h3> <p><a href="https://segmentfault.com/a/1190000012175422" target="_blank" rel="noopener noreferrer">为什么 0.1+0.2 不等于 0.3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//加法</span>
<span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> r1<span class="token punctuation">,</span> r2<span class="token punctuation">,</span> m<span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    r1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    r1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    r2 <span class="token operator">=</span> arg<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    r2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  m <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>r1<span class="token punctuation">,</span> r2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">*</span> m <span class="token operator">+</span> arg <span class="token operator">*</span> m<span class="token punctuation">)</span> <span class="token operator">/</span> m<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//减法</span>

<span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sub</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">-</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//乘法</span>

<span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">mul</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    s1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    s2 <span class="token operator">=</span> arg<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    m <span class="token operator">+=</span> s1<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    m <span class="token operator">+=</span> s2<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">Number</span><span class="token punctuation">(</span>s2<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span>
    Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//除法</span>

<span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">div</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> t1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    t2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    r1<span class="token punctuation">,</span>
    r2<span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    t1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    t2 <span class="token operator">=</span> arg<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">with</span> <span class="token punctuation">(</span>Math<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    r1 <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    r2 <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>r1 <span class="token operator">/</span> r2<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> t2 <span class="token operator">-</span> t1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="js-中整数的安全范围是多少？"><a href="#js-中整数的安全范围是多少？" class="header-anchor">#</a> js 中整数的安全范围是多少？</h3> <p>安全整数指的是，在这个范围内的整数转化为二进制存储的时候不会出现精度丢失，能够被“安全”呈现的最大整数是 2^53 - 1，
即 9007199254740991，在 ES6 中被定义为 Number.MAX_SAFE_INTEGER。最小整数是-9007199254740991，在 ES6 中
被定义为 Number.MIN_SAFE_INTEGER。</p> <p>如果某次计算的结果得到了一个超过 JavaScript 数值范围的值，那么这个值会被自动转换为特殊的 Infinity 值。如果某次
计算返回了正或负的 Infinity 值，那么该值将无法参与下一次的计算。判断一个数是不是有穷的，可以使用 isFinite 函数
来判断。</p> <h3 id="严格模式"><a href="#严格模式" class="header-anchor">#</a> 严格模式</h3> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode/Transitioning_to_strict_mode" target="_blank" rel="noopener noreferrer">严格模式的限制<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>不能删除不可删除的属性，否则报错</li> <li>不能对只读属性赋值，否则报错</li> <li>禁止 this 指向全局对象</li> <li>不能使用前缀 0 表示八进制数，否则报错</li> <li>不能使用 with 语句</li> <li>变量必须声明后再使用</li> <li>函数的参数不能有同名属性，否则报错</li> <li>不能删除变量 delete prop，会报错，只能删除属性 delete global[prop]</li> <li>eval 不会在它的外层作用域引入变量</li> <li>eval 和 arguments 不能被重新赋值</li> <li>arguments 不会自动反映函数参数的变化</li> <li>不能使用 arguments.callee</li> <li>不能使用 arguments.caller</li> <li>不能使用 fn.caller 和 fn.arguments 获取函数调用的堆栈</li> <li>增加了保留字（比如 protected、static 和 interface）</li></ul> <h2 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> <strong>数据类型</strong></h2> <h3 id="js-变量类型"><a href="#js-变量类型" class="header-anchor">#</a> JS 变量类型</h3> <p>JS 中有 6 种原始值，分别是：</p> <ol><li><code>boolean</code></li> <li><code>number</code></li> <li><code>string</code></li> <li><code>undefined</code></li> <li><code>symbol</code><a href="https://www.jianshu.com/p/f40a77bbd74e" target="_blank" rel="noopener noreferrer">理解和使用 ES6 中的 Symbol<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><code>null</code></li></ol> <p>引用类型：</p> <ol><li>对象 <code>Object</code></li> <li>数组 <code>Array</code></li> <li>函数 <code>Function</code></li></ol> <p>两种类型间的主要区别是它们的存储位置不同，基本数据类型的值直接保存在栈中，而复杂数据类型的值保存在堆中，通过使用在栈中
保存对应的指针来获取堆中的值。</p> <h4 id="instanceof"><a href="#instanceof" class="header-anchor">#</a> instanceof</h4> <h4 id="实现类型判断函数"><a href="#实现类型判断函数" class="header-anchor">#</a> 实现类型判断函数</h4> <ol><li>判断 null</li> <li>判断基础类型</li> <li>使用<code>Object.prototype.toString.call(target)</code>来判断<strong>引用类型</strong></li></ol> <p>注意： 一定是使用<code>call</code>来调用，不然是判断的 Object.prototype 的类型
之所以要先判断是否为基本类型是因为：虽然<code>Object.prototype.toString.call()</code>能判断出某值是：number/string/boolean，但是其实在包装的时候是把他们先转成了对象然后再判断类型的。 但是 JS 中包装类型和原始类型还是有差别的，因为对一个包装类型来说，typeof 的值是 object</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//先处理最特殊的Null</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;null&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//判断是不是基础类型</span>
  <span class="token keyword">const</span> typeOfT <span class="token operator">=</span> <span class="token keyword">typeof</span> target<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>typeOfT <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> typeOfT<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//肯定是引用类型了</span>
  <span class="token keyword">const</span> template <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;[object Object]&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;[object Array]&quot;</span><span class="token operator">:</span> <span class="token string">&quot;array&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 一些包装类型</span>
    <span class="token string">&quot;[object String]&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object - string&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;[object Number]&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object - number&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;[object Boolean]&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object - boolean&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> typeStr <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> template<span class="token punctuation">[</span>typeStr<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="判断-array"><a href="#判断-array" class="header-anchor">#</a> 判断 Array</h4> <ul><li><code>Array.isArray(obj)</code> <ul><li>ECMAScript 5 中的函数，当使用 ie8 的时候就会出现问题。</li></ul></li> <li><code>obj instanceof Array</code> <ul><li>当用来检测在不同的 window 或 iframe 里构造的数组时会失败。这是因为每一个 iframe 都有它自己的执行环境，彼此之间并不共享原型链，所以此时的判断一个对象是否为数组就会失败。此时我们有一个更好的方式去判断一个对象是否为数组。</li></ul></li> <li><code>Object.prototype.toString.call(obj) == '[object Array]'</code></li> <li><code>obj.constructor === Array</code> <ul><li>constructor 属性返回对创建此对象的函数的引用</li></ul></li></ul> <h4 id="isnan-和-number-isnan-函数"><a href="#isnan-和-number-isnan-函数" class="header-anchor">#</a> isNaN 和 Number.isNaN 函数</h4> <div class="language- extra-class"><pre class="language-text"><code> 函数 isNaN 接收参数后，会尝试将这个参数转换为数值，任何不能被转换为数值的的值都会返回 true，因此非数字值传入也会
 返回 true ，会影响 NaN 的判断。

 函数 Number.isNaN 会首先判断传入参数是否为数字，如果是数字再继续判断是否为 NaN ，这种方法对于 NaN 的判断更为
 准确。
</code></pre></div><h3 id="类型转换"><a href="#类型转换" class="header-anchor">#</a> 类型转换</h3> <h4 id="tostring"><a href="#tostring" class="header-anchor">#</a> ToString</h4> <ol><li><p>null 转换为 &quot;null&quot;，undefined 转换为 &quot;undefined&quot;</p></li> <li><p>true 转换为 &quot;true&quot;，false 转换为 &quot;false&quot;</p></li> <li><p>Number 直接转换，不过那些极小和极大的数字会使用指数形式</p></li> <li><p>Symbol 类型的值直接转换，但是只允许显式强制类型转换，使用隐式强制类型转换会产生错误。</p></li> <li><p>对普通对象来说，除非自行定义 toString() 方法，否则会调用 toString()（Object.prototype.toString()）
来返回内部属性 [[Class]] 的值，如&quot;[object Object]&quot;。如果对象有自己的 toString() 方法，字符串化时就会
调用该方法并使用其返回值。</p></li></ol> <h4 id="tonumber"><a href="#tonumber" class="header-anchor">#</a> ToNumber</h4> <ol><li><p>undefined 类型的值转换为 NaN。</p></li> <li><p>null 类型的值转换为 0。</p></li> <li><p>true 转换为 1，false 转换为 0。</p></li> <li><p>String 类型的值转换如同使用 Number() 函数进行转换，如果包含非数字值则转换为 NaN，空字符串为 0。</p></li> <li><p>Symbol 类型的值不能转换为数字，会报错。</p></li> <li><p>对象（包括数组）会首先 ToPrimitive 被转换为相应的基本类型值，如果返回的是非数字的基本类型值，则再遵循以上规则将其强制转
换为数字。</p></li></ol> <h4 id="toprimitive"><a href="#toprimitive" class="header-anchor">#</a> ToPrimitive</h4> <p>对象在转换类型的时候，会调用内置的 [[ToPrimitive]] 函数，对于该函数来说，算法逻辑一般来说如下：</p> <ol><li>如果已经是原始类型了，那就不需要转换了</li> <li>如果需要转字符串类型就调用 x.toString()，转换为基础类型的话就返回转换的值。不是字符串类型的话就先调用 valueOf，结果不是基础类型的话再调用 toString</li> <li>调用 x.valueOf()，如果转换为基础类型，就返回转换的值</li> <li>如果都没有返回原始类型，就会报错 TypeError</li></ol> <h4 id="和"><a href="#和" class="header-anchor">#</a> ==和===</h4> <p>宽松相等(loose equals) ==</p> <p>严格相等(strict equals) ===</p> <p>判断流程：</p> <ol><li>首先会判断两者类型是否相同。相同使用===比较</li> <li>类型不相同的话，那么就会进行类型转换</li> <li>会先判断是否在对比 null 和 undefined，是的话就会返回 true</li> <li>判断两者类型是否为 string 和 number，是的话就会将字符串转换为 number</li> <li>判断其中一方是否为 boolean，是的话就会把 boolean 转为 number 再进行判断</li> <li>判断其中一方是否为 object 且另一方为 string、number 或者 symbol，是的话就会把 object 转为原始类型再进行判断</li> <li>两边都是对象的话，那么只要不是同一对象的不同引用，都为 false</li></ol> <p>注意，只要出现 NaN，就一定是 false，因为就连 NaN 自己都不等于 NaN
对于 NaN，判断的方法是使用全局函数 <code>isNaN()</code></p> <p><a href="https://blog.csdn.net/weixin_39856066/article/details/95483680" target="_blank" rel="noopener noreferrer">(a==1&amp;&amp;a==2&amp;&amp;a==3)的实现和原理<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="引用类型"><a href="#引用类型" class="header-anchor">#</a> <strong>引用类型</strong></h2> <h3 id="class"><a href="#class" class="header-anchor">#</a> [[class]]</h3> <p>所有 typeof 返回值为 &quot;object&quot; 的对象（如数组）都包含一个内部属性 [[Class]]（我们可以把它看作一个内部的分类，而非
传统的面向对象意义上的类）。这个属性无法直接访问，一般通过 Object.prototype.toString(..) 来查看。例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &quot;[object Array]&quot;</span>

<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token regex">/regex-literal/i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &quot;[object RegExp]&quot;</span>
</code></pre></div><h3 id="string"><a href="#string" class="header-anchor">#</a> String</h3> <p><a href="https://www.jb51.net/article/145610.htm" target="_blank" rel="noopener noreferrer">JS 中&quot;hello&quot;与 new String(&quot;hello&quot;)引出的问题详解|脚本之家<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="array"><a href="#array" class="header-anchor">#</a> Array</h3> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array##%E6%95%B0%E7%BB%84%E5%AE%9E%E4%BE%8B" target="_blank" rel="noopener noreferrer">Array<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://segmentfault.com/a/1190000017790888?utm_source=tag-newest" target="_blank" rel="noopener noreferrer">JS 判断数组的六种方法详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="类数组与数组的区别与转换"><a href="#类数组与数组的区别与转换" class="header-anchor">#</a> 类数组与数组的区别与转换</h4> <p>类数组：</p> <ol><li>具有<code>length</code>属性，其他属性（索引）为非负整数（对象中的索引会被当作字符串来处理）</li> <li>不具有数组所具备的方法。</li> <li>类数组是一个普通的对象，而数组是<code>Array</code>类型</li></ol> <p>常见的类数组：函数的参数<code>arguments</code>，<code>DOM</code>对象列表（比如通过<code>document.querySelectorAll()</code>得到的列表）</p> <p>类数组转换为数组：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">,</span>start<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token operator">...</span>arrayLike<span class="token punctuation">]</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>任何定义了<code>iterator</code>遍历器借口的对象，都可以用扩展运算符转为真正的数组。</p></blockquote> <p><code>Array.from()</code>可以将两类对象转为真正的数组：<code>array-like Object</code>类似数组的对象和<code>iterable</code>可遍历对象。</p> <p><a href="https://segmentfault.com/a/1190000020221170" target="_blank" rel="noopener noreferrer">Array.from() 五个超好用的用途<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://segmentfault.com/a/1190000020233039" target="_blank" rel="noopener noreferrer">JS 数组基本操作——数组遍历到底有多少种方式？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="regexp"><a href="#regexp" class="header-anchor">#</a> RegExp</h3> <h4 id="使用正则表达式的方法"><a href="#使用正则表达式的方法" class="header-anchor">#</a> 使用正则表达式的方法</h4> <ul><li>exec 一个在字符串中执行查找匹配的 RegExp 方法，它返回一个数组（未匹配到则返回 null）。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> str <span class="token operator">=</span>
  <span class="token string">&quot;Visit W3School, W3School is a place to study web technology.W3School&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> patt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;W3School&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result<span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>result <span class="token operator">=</span> patt<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>patt<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//W3School 14 W3School 24 W3School 68</span>
</code></pre></div><ul><li>test 一个在字符串中测试是否匹配的 RegExp 方法，它返回 true 或 false。</li> <li>match 一个在字符串中执行查找匹配的 String 方法，它返回存放匹配结果的数组或者在未匹配到时返回 null。</li> <li>search 一个在字符串中测试匹配的 String 方法，它返回匹配到的位置索引，或者在失败时返回-1。</li> <li>replace 一个在字符串中执行查找匹配的 String 方法，并且使用替换字符串替换掉匹配到的子字符串。</li> <li>split 一个使用正则表达式或者一个固定字符串分隔一个字符串，并将分隔后的子字符串存储到数组中的 String 方法。</li></ul> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp" target="_blank" rel="noopener noreferrer">RegExp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="拷贝"><a href="#拷贝" class="header-anchor">#</a> 拷贝</h3> <p>**浅拷贝：**仅仅是指向被复制的内存地址，如果原地址发生改变，那么浅复制出来的对象也会相应的改变。</p> <blockquote><p>创建一个新对象，这个对象有着原始对象属性值的一份精确拷贝。如果属性是基本类型，拷贝的就是基本类型的值，如果属性是引用类型，拷贝的就是内存地址 ，所以如果其中一个对象改变了这个地址，就会影响到另一个对象。</p></blockquote> <p><strong>深拷贝：<strong>在计算机中开辟一块</strong>新的内存地址</strong>用于存放复制的对象。</p> <blockquote><p>将一个对象从内存中完整的拷贝一份出来,从堆内存中开辟一个新的区域存放新对象,且修改新对象不会影响原对象</p></blockquote> <p><strong>深拷贝和浅拷贝最根本的区别在于是否是真正获取了一个对象的复制实体，而不是引用。</strong></p> <p><img src="/assets/img/%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D.png" alt=""></p> <p><a href="https://www.jianshu.com/p/35d69cf24f1f" target="_blank" rel="noopener noreferrer">彻底讲明白浅拷贝与深拷贝<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>浅拷贝实现方法:</strong></p> <ol><li><p>Object.assign</p> <ul><li><p>Object.assign 是一个浅拷贝,它只是在<strong>根属性</strong>(对象的第一层级)创建了一个新的对象，但是对于属性的值是仍是对象的话依然是浅拷贝</p></li> <li><p>不会拷贝对象继承的属性</p></li> <li><p>不可枚举的属性</p></li> <li><p>可以拷贝 Symbol 类型</p></li></ul></li> <li><p>扩展运算符、slice、concat</p> <ul><li>和 assgin 一样只拷贝一层</li></ul></li></ol> <p><strong>深拷贝实现方法:</strong></p> <ol><li><p>循环+递归</p> <ul><li>只能实现 object、array 的深拷贝</li> <li>for...in 无法获得 Symbol 类型的键，而 Reflect 可以获取</li></ul></li> <li><p>JSON.stringify</p> <ul><li><p>拷贝的对象的值中如果有函数,undefined,symbol 则经过 JSON.stringify()序列化后的 JSON 字符串中这个键值对会消失</p></li> <li><p>无法拷贝不可枚举的属性， 无法拷贝对象的原型链</p></li> <li><p>拷贝 Date 引用类型会变成字符串</p></li> <li><p>拷贝 RegExp 引用类型会变成空对象</p></li> <li><p>对象中含有 NaN、 Infinity 和 - Infinity， 则序列化的结果会变成 null</p></li> <li><p>无法拷贝对象的循环应用(即 obj[key] = obj)</p></li></ul></li> <li><p>lodash(<a href="https://github.com/lodash/lodash/blob/master/.internal/baseClone.js" target="_blank" rel="noopener noreferrer">第三方库<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</p></li></ol> <h2 id="函数"><a href="#函数" class="header-anchor">#</a> <strong>函数</strong></h2> <h3 id="作用域"><a href="#作用域" class="header-anchor">#</a> 作用域</h3> <p>作用域是储存和访问变量的规则</p> <p><img src="/assets/img/JS%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B.png" alt=""></p> <p>编译阶段</p> <p>由编译器完成，将代码翻译成可执行代码，这个阶段作用域规则会确定，编译阶段经历以下三个步骤：</p> <ul><li>分词/词法分析：将由字符组成的字符串分解成（对编程语言来说）有意义的代码块，这些代码块被称为词法单元（token）;</li> <li>解析/语法分析：将词法单元流（数组）转换成一个由元素逐级嵌套所组成的代表了程序语法结构的树——“抽象语法树”（AST）</li> <li>代码生成：将 AST 转换为可执行代码的过程称被称为代码生成。</li></ul> <h3 id="执行上下文"><a href="#执行上下文" class="header-anchor">#</a> 执行上下文</h3> <p><a href="https://www.jianshu.com/p/a6e8d2bf1ca0" target="_blank" rel="noopener noreferrer">执行上下文及其生命周期<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://juejin.im/post/5db85b866fb9a0207d4cbf92" target="_blank" rel="noopener noreferrer">JavaScript 进阶-执行上下文<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>每个执行上下文都有 3 个重要属性：</p> <ul><li>变量对象</li> <li>作用域链</li> <li>this</li></ul> <p>在 js 中，执行上下文分为以下三种：</p> <ul><li>全局执行上下文：只有一个，也就是浏览器对象(即 window 对象)，this 指向的就是这个全局对象。</li> <li>函数执行上下文：有无数个，只有在函数被调用时才会被创建，每次调用函数都会创建一个新的执行上下文。</li> <li>Eval 函数执行上下文：js 的 eval 函数执行其内部的代码会创建属于自己的执行上下文, 很少用而且不建议使用。</li></ul> <h3 id="作用域链"><a href="#作用域链" class="header-anchor">#</a> 作用域链</h3> <p>一般情况下变量取值回到创建这个变量函数的作用域中取值，但是如果当前作用域中没有查到值，就会向上级作用域去查，知道查到全局作用域，这么一个查找过程形成的链条就叫作用域链</p> <h3 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h3> <p>闭包是指有权访问另一个函数作用域中变量的函数，创建闭包的最常见的方式就是在一个函数内创建另一个函数，创建的函数可以
访问到当前函数的局部变量</p> <p>用途</p> <ol><li><p>使函数外部能够访问到函数内部的变量。通过使用闭包，我们可以通过在外部调用闭包函数，从而在外
部访问到函数内部的变量，可以使用这种方法来创建私有变量</p></li> <li><p>使已经运行结束的函数上下文中的变量对象继续留在内存中，因为闭包函数保留了这个变量对象的引用，所以
这个变量对象不会被回收</p></li></ol> <p><a href="https://www.cnblogs.com/amcy/p/9912528.html##_label0" target="_blank" rel="noopener noreferrer">什么是闭包？闭包的作用，用法及优缺点<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="计数器"><a href="#计数器" class="header-anchor">#</a> 计数器</h4> <p>实现一个 foo 函数 可以这么使用:</p> <div class="language-js extra-class"><pre class="language-js"><code>a <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// a === 1;b === 2;c === 3;</span>
foo<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//d === 1;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">myIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> index <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> index<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  foo<span class="token punctuation">.</span><span class="token function-variable function">clear</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    index <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> foo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token function">myIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="封装私有变量"><a href="#封装私有变量" class="header-anchor">#</a> 封装私有变量</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">plus</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">++</span>count<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">minus</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">--</span>count<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getCount</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> count<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
counter<span class="token punctuation">.</span><span class="token function">puls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
counter<span class="token punctuation">.</span><span class="token function">puls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="作用域与变量声明提升"><a href="#作用域与变量声明提升" class="header-anchor">#</a> 作用域与变量声明提升</h3> <ul><li>在 JavaScript 中，函数声明与变量声明会被 JavaScript 引擎隐式地提升到当前作用域的顶部</li> <li>声明语句中的赋值部分并不会被提升，只有名称被提升</li> <li>函数声明的优先级高于变量，如果变量名跟函数名相同且未赋值，则函数声明会覆盖变量声明</li> <li>如果函数有多个同名参数，那么最后一个参数（即使没有定义）会覆盖前面的同名参数</li></ul> <h3 id="函数柯里化"><a href="#函数柯里化" class="header-anchor">#</a> 函数柯里化</h3> <p>柯里化（英语：Currying），又称为部分求值，是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回一个新的函数的技术，新函数接受余下参数并返回运算结果。</p> <p>实现一个 add 方法，使计算结果能够满足如下预期：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div><p>实现方法： 做一个闭包，返回一个函数，这个函数每次执行会改写闭包里面记录参数的数组。当这个函数判断参数个数够了，就去执行它。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 存储已传入参数</span>
  <span class="token keyword">let</span> _args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// 做一个闭包</span>
  <span class="token keyword">function</span> <span class="token function">_curry</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 把参数合并</span>
    _args <span class="token operator">=</span> _args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 如果参数够了就执行</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_args<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> func<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">...</span>_args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      _args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 继续返回此函数</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> _curry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> _curry<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 测试代码</span>
<span class="token keyword">function</span> <span class="token function">add1</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> testAdd <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span>add1<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="立即执行函数（iife）"><a href="#立即执行函数（iife）" class="header-anchor">#</a> 立即执行函数（IIFE）</h3> <p>IIFE（ 立即调用函数表达式）是一个在定义时就会立即执行的 JavaScript 函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  statements<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这是一个被称为 自执行匿名函数 的设计模式，主要包含两部分。</p> <p>第一部分是包围在圆括号运算符 () 里的一个匿名函数，这个匿名函数拥有独立的词法作用域。这不仅避免了外界访问此 IIFE 中的变量，而且又不会污染全局作用域。</p> <p>第二部分再一次使用 () 创建了一个立即执行函数表达式，JavaScript 引擎到此将直接执行函数。</p> <p>当函数变成立即执行的函数表达式时，表达式中的变量不能从外部访问。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;Barry&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 无法从外部访问变量 name</span>
name<span class="token punctuation">;</span> <span class="token comment">// 抛出错误：&quot;Uncaught ReferenceError: name is not defined&quot;</span>
</code></pre></div><p>将 IIFE 分配给一个变量，不是存储 IIFE 本身，而是存储 IIFE 执行后返回的结果。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;Barry&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// IIFE 执行后返回的结果：</span>
result<span class="token punctuation">;</span> <span class="token comment">// &quot;Barry&quot;</span>
</code></pre></div><h3 id="面向切片编程（aop）"><a href="#面向切片编程（aop）" class="header-anchor">#</a> 面向切片编程（AOP）</h3> <p>把一些与业务逻辑无关的功能抽取出来，然后通过“动态织入”的方式加入业务逻辑模块中。这样设计的好处是：首先可以保证业务逻辑模块的纯净和高内聚性；其次可以方便地复用模块</p> <h2 id="this"><a href="#this" class="header-anchor">#</a> <strong>this</strong></h2> <p><a href="https://muyiy.cn/blog/3/3.1.html##_1-%E8%B0%83%E7%94%A8%E4%BD%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">this 全面解析<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://juejin.im/post/5e3e796d518825495b298878" target="_blank" rel="noopener noreferrer">this/apply/call 问点<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="优先级"><a href="#优先级" class="header-anchor">#</a> 优先级</h3> <p>构造函数调用&gt;call,apply,bind 函数&gt;方法调用模式&gt;函数调用模式</p> <p>箭头函数的 this 一旦被绑定，就不会再被任何方式所改变。</p> <h3 id="this-指向"><a href="#this-指向" class="header-anchor">#</a> this 指向</h3> <h4 id="头条一面"><a href="#头条一面" class="header-anchor">#</a> 头条一面</h4> <p>请分别写出下面题目的答案。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//请写出以下输出结果：</span>
Foo<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//-&gt; 2    Foo对象上的getName() ，这里不会是3，因为只有Foo的实例对象才会是3，Foo上面是没有3的</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//-&gt; 4    window上的getName，console.log(5)的那个函数提升后，在console.log(4)的那里被重新赋值</span>
<span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//-&gt; 1    在Foo函数中，getName是全局的getName，覆盖后输出 1</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//-&gt; 1    window中getName();</span>
<span class="token keyword">new</span> <span class="token class-name">Foo<span class="token punctuation">.</span>getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//-&gt; 2    Foo后面不带括号而直接 '.'，那么点的优先级会比new的高，所以把 Foo.getName 作为构造函数</span>
<span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//-&gt; 3    此时是Foo的实例，原型上会有输出3这个方法</span>
</code></pre></div><h4 id="箭头函数中的-this-判断"><a href="#箭头函数中的-this-判断" class="header-anchor">#</a> 箭头函数中的 this 判断</h4> <p>箭头函数里面的 this 是继承它作用域父级的 this， 即声明箭头函数处的 this</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">b</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">c</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a</span>
a<span class="token punctuation">.</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> a<span class="token punctuation">.</span>b<span class="token punctuation">;</span>
<span class="token function">d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>
</code></pre></div><h4 id="this-判断"><a href="#this-判断" class="header-anchor">#</a> this 判断</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> name1 <span class="token operator">=</span> <span class="token string">&quot;kin&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
    name1<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> name1 <span class="token operator">=</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>因为 fn 处绑定的是箭头函数，箭头函数并不创建 this，它只会从自己的作用域链的上一层继承 this。这里它的上一层是 test()，非严格模式下 test 中 this 值为 window。</p> <ul><li>如果在绑定 fn 的时候使用了 function，那么答案会是 'jack'</li> <li>如果第一行的 var 改为了 let，那么答案会是 undefind， 因为 let 不会挂到 window 上</li></ul> <h3 id="call、apply、bind"><a href="#call、apply、bind" class="header-anchor">#</a> call、apply、bind</h3> <h2 id="对象"><a href="#对象" class="header-anchor">#</a> <strong>对象</strong></h2> <p><a href="https://blog.csdn.net/qq_42615057/article/details/98732902" target="_blank" rel="noopener noreferrer">Js 是基于对象还是面向对象的<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="属性值"><a href="#属性值" class="header-anchor">#</a> 属性值</h3> <h4 id="数据属性"><a href="#数据属性" class="header-anchor">#</a> 数据属性</h4> <ol><li><p>Configurable 表示能否通过 delete 删除属性从而重新定义属性，默认为 true</p></li> <li><p>Enumerable 表示属性是否可以枚举，默认为 true</p></li> <li><p>Writable 表示能否修改属性的值，默认为 true</p></li> <li><p>Value 包含这个属性的数据值，默认为 undefined</p></li></ol> <p>修改属性默认值：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> person<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  writable<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
  value<span class="token operator">:</span><span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">,</span>
  configurable<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//一旦被设置为false，不可以更改</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

person<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">&quot;xx&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//xxxx,严格模式下会报错</span>
<span class="token keyword">delete</span> person<span class="token punctuation">.</span>name <span class="token comment">//无效，严格模式下会报错</span>
</code></pre></div><h4 id="访问器属性"><a href="#访问器属性" class="header-anchor">#</a> 访问器属性</h4> <ol><li><p>Configurable 表示能否通过 delete 删除属性从而重新定义属性，默认为 false</p></li> <li><p>Enumerable 表示属性是否可以枚举，默认为 false</p></li> <li><p>get 读取属性时调用函数，默认 undefined</p></li> <li><p>set 写入属性时调用函数，默认为 undefined</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  _age<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token comment">//下划线写法表示只能通过对象方法访问的属性</span>
  state<span class="token operator">:</span> <span class="token string">&quot;young&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newVal <span class="token operator">&gt;</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token string">&quot;old&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>定于多个属性，使用<code>Object.defineProperties()</code></p> <h4 id="读取属性的特性"><a href="#读取属性的特性" class="header-anchor">#</a> 读取属性的特性</h4> <p>使用 <code>Object.getOwnPropertyDescriptor()</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  _age<span class="token operator">:</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token number">20</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token string">&quot;young&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>newVal <span class="token operator">&gt;</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token string">&quot;old&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token string">&quot;_age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
descriptor<span class="token punctuation">.</span>value<span class="token punctuation">;</span> <span class="token comment">//20</span>
descriptor<span class="token punctuation">.</span>configurable<span class="token punctuation">;</span> <span class="token comment">//false</span>

<span class="token keyword">var</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
descriptor<span class="token punctuation">.</span>value<span class="token punctuation">;</span> <span class="token comment">//undefined</span>
descriptor<span class="token punctuation">.</span>configurable<span class="token punctuation">;</span> <span class="token comment">//false</span>
<span class="token keyword">typeof</span> descriptor<span class="token punctuation">;</span> <span class="token comment">//function</span>
</code></pre></div><h3 id="遍历对象的方法"><a href="#遍历对象的方法" class="header-anchor">#</a> 遍历对象的方法</h3> <table><thead><tr><th style="text-align:center;">方法</th> <th style="text-align:center;">对象自身属性</th> <th style="text-align:center;">继承属性</th> <th style="text-align:center;">不可枚举属性</th> <th style="text-align:center;">Symbol 属性</th> <th style="text-align:center;">返回值</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>Object.keys(obj)</code></td> <td style="text-align:center;">O</td> <td style="text-align:center;">X</td> <td style="text-align:center;">X</td> <td style="text-align:center;">X</td> <td style="text-align:center;">数组</td></tr> <tr><td style="text-align:center;"><code>for...in</code></td> <td style="text-align:center;">O</td> <td style="text-align:center;">O</td> <td style="text-align:center;">X</td> <td style="text-align:center;">X</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;"><code>Object.getOwnPropertyNames(obj)</code></td> <td style="text-align:center;">O</td> <td style="text-align:center;">O</td> <td style="text-align:center;">O</td> <td style="text-align:center;">X</td> <td style="text-align:center;">数组</td></tr> <tr><td style="text-align:center;"><code>Reflect.ownKeys(obj)</code></td> <td style="text-align:center;">O</td> <td style="text-align:center;">O</td> <td style="text-align:center;">O</td> <td style="text-align:center;">O</td> <td style="text-align:center;">数组</td></tr> <tr><td style="text-align:center;"><code>Object.getOwnPropertySymbols(obj)</code></td> <td style="text-align:center;">X</td> <td style="text-align:center;">X</td> <td style="text-align:center;">X</td> <td style="text-align:center;">O</td> <td style="text-align:center;">数组</td></tr></tbody></table> <p>以上的 5 种方法遍历对象的键名，都遵守同样的属性遍历的次序规则。</p> <ol><li>遍历所有数值键，按照数值升序排列。</li> <li>遍历所有字符串键，按照加入时间升序排列。</li> <li>遍历所有 Symbol 键，按照加入时间升序排列。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> a<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ['2', '10', 'b', 'a', Symbol()]</span>
</code></pre></div><h4 id="判断对象是否为空对象"><a href="#判断对象是否为空对象" class="header-anchor">#</a> 判断对象是否为空对象</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;{}&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//2</span>
<span class="token keyword">var</span> <span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//3</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">//4</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="私有实现"><a href="#私有实现" class="header-anchor">#</a> 私有实现</h3> <p><a href="https://juejin.im/post/5c7e14fff265da2dd77403af" target="_blank" rel="noopener noreferrer">JavaScript 如何实现私有变量私有方法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>最简单的方式是提前约定好私有变量</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 还是可以获取p._age</span>
</code></pre></div><p>闭包 + Symbol</p> <p>Symbol 值通过 Symbol 函数生成。这就是说，对象的属性名现在可以有两种类型，一种是原来就有的字符串，另一种就是新增的 Symbol 类型。凡是属性名属于 Symbol 类型，就都是独一无二的，可以保证不会与其他属性名产生冲突；类似与 UUID 的用法。</p> <p>创建一个 Person 类，其包含公有属性 name 和私有属性 age 以及公有方法 setAge ；创建一个 Teacher 类，使其继承 Person ，并包含私有属性 studentCount 和私有方法 setStudentCount</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 这里写在一个立即执行函数里，分开写也是可以的</span>
<span class="token keyword">const</span> Person<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> _age <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">[</span>_age<span class="token punctuation">]</span> <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">[</span>_age<span class="token punctuation">]</span> <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> Person<span class="token punctuation">;</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Teacher <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> _studentCount <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;studentCount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> _setStudentCount <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;setStudentCount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">[</span>_studentCount<span class="token punctuation">]</span> <span class="token operator">=</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">[</span>_setStudentCount<span class="token punctuation">]</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">[</span>_studentCount<span class="token punctuation">]</span> <span class="token operator">=</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">[</span>_setStudentCount<span class="token punctuation">]</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> Teacher<span class="token punctuation">;</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="bom"><a href="#bom" class="header-anchor">#</a> <strong>BOM</strong></h2> <p>BOM 是 browser object model 的缩写， 简称浏览器对象模型。 主要处理浏览器窗口和框架，
描述了与浏览器进行交互的方法和接口， 可以对浏览器窗口进行访问和操作， 譬如可以弹出
新的窗口， 回退历史记录， 获取 url……</p> <h3 id="bom-与-dom-的关系"><a href="#bom-与-dom-的关系" class="header-anchor">#</a> BOM 与 DOM 的关系</h3> <ol><li>javacsript 是通过访问 BOM 对象来访问、 控制、 修改浏览器</li> <li>BOM 的 window 包含了 document， 因此通过 window 对象的 document 属性就可以访问、
检索、 修改文档内容与结构。</li> <li>document 对象又是 DOM 模型的根节点。</li></ol> <p>因此， BOM 包含了 DOM， 浏览器提供出来给予访问的是 BOM 对象， 从 BOM 对象再访
问到 DOM 对象， 从而 js 可以操作浏览器以及浏览器读取到的文档</p> <h3 id="bom-对象"><a href="#bom-对象" class="header-anchor">#</a> BOM 对象</h3> <ul><li>Window JavaScript 层级中的顶层对象， 表示浏览器窗口。</li> <li>Navigator 包含客户端浏览器的信息。</li> <li>History 包含了浏览器窗口访问过的 URL。</li> <li>Location 包含了当前 URL 的信息。</li> <li>Screen 包含客户端显示屏的信息。</li></ul> <h3 id="history-对象"><a href="#history-对象" class="header-anchor">#</a> History 对象</h3> <p>History 对象包含用户（在浏览器窗口中） 访问过的 URL</p> <table><thead><tr><th>方法/属性</th> <th>描述</th></tr></thead> <tbody><tr><td>length</td> <td>返回浏览器历史列表中的 URL 数量。</td></tr> <tr><td>back()</td> <td>加载 history 列表中的前一个 URL。</td></tr> <tr><td>forward()</td> <td>加载 history 列表中的下一个 URL。</td></tr> <tr><td>go()</td> <td>加载 history 列表中的某个具体页面</td></tr></tbody></table> <h3 id="location-对象"><a href="#location-对象" class="header-anchor">#</a> Location 对象</h3> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Location" target="_blank" rel="noopener noreferrer">MDN|Location<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
Location 对象包含有关当前 URL 的信息。</p> <table><thead><tr><th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>hash</td> <td>设置或返回从井号 (##) 开始的 URL（锚） 。</td></tr> <tr><td>host</td> <td>设置或返回主机名和当前 URL 的端口号。</td></tr> <tr><td>hostname</td> <td>设置或返回当前 URL 的主机名。</td></tr> <tr><td>href</td> <td>设置或返回完整的 URL。</td></tr> <tr><td>pathname</td> <td>设置或返回当前 URL 的路径部分。</td></tr> <tr><td>port</td> <td>设置或返回当前 URL 的端口号。</td></tr> <tr><td>protocol</td> <td>设置或返回当前 URL 的协议。</td></tr> <tr><td>search</td> <td>置或返回从问号 (?) 开始的 URL（查询部分） 。</td></tr></tbody></table> <table><thead><tr><th>方法</th> <th>描述</th></tr></thead> <tbody><tr><td>assign()</td> <td>加载新的文档。</td></tr> <tr><td>reload(‘force’)</td> <td>重新加载当前文档。参数可选，不填或填 false 则取浏览器缓存的文档</td></tr> <tr><td>replace()</td> <td>用新的文档替换当前文档。</td></tr></tbody></table> <h3 id="window-对象"><a href="#window-对象" class="header-anchor">#</a> Window 对象</h3> <p>Window 对象表示一个浏览器窗口或一个框架。 在客户端 JavaScript 中， Window 对象
是全局对象，所有的表达式都在当前的环境中计算。 例如，可以只写 document， 而
不必写 window.document。</p> <table><thead><tr><th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>closed</td> <td>返回窗口是否已被关闭。</td></tr> <tr><td>defaultStatus</td> <td>设置或返回窗口状态栏中的默认文本。 （仅 Opera 支持）</td></tr> <tr><td>document</td> <td>对 Document 对象的只读引用。 请参阅 Document 对象。</td></tr> <tr><td>history</td> <td>对 History 对象的只读引用。 请参数 History 对象。</td></tr> <tr><td>innerheight</td> <td>返回窗口的文档显示区的高度。</td></tr> <tr><td>innerwidth</td> <td>返回窗口的文档显示区的宽度。</td></tr> <tr><td>length</td> <td>设置或返回窗口中的框架数量。</td></tr> <tr><td>location</td> <td>用于窗口或框架的 Location 对象。 请参阅 Location 对象。</td></tr> <tr><td>name</td> <td>设置或返回窗口的名称。</td></tr> <tr><td>Navigator</td> <td>对 Navigator 对象的只读引用。 请参数 Navigator 对象。</td></tr> <tr><td>opener</td> <td>返回对创建此窗口的窗口的引用。</td></tr> <tr><td>outerheight</td> <td>返回窗口的外部高度。</td></tr> <tr><td>outerwidth</td> <td>返回窗口的外部宽度。</td></tr> <tr><td>pageXOffset</td> <td>设置或返回当前页面相对于窗口显示区左上角的 X 位置。</td></tr> <tr><td>pageYOffset</td> <td>设置或返回当前页面相对于窗口显示区左上角的 Y 位置。</td></tr> <tr><td>parent</td> <td>返回父窗口。</td></tr> <tr><td>Screen</td> <td>对 Screen 对象的只读引用。 请参数 Screen 对象。</td></tr> <tr><td>self</td> <td>返回对当前窗口的引用。 等价于 Window 属性。</td></tr> <tr><td>status</td> <td>设置窗口状态栏的文本。 (默认只支持 Opera)</td></tr> <tr><td>top</td> <td>返回最顶层的先辈窗口。</td></tr> <tr><td>window</td> <td>window 属性等价于 self 属性， 它包含了对窗口自身的引用。</td></tr> <tr><td>screenLeft <br> screenTop <br> screenX <br> screenY</td> <td>只读整数。声明了窗口的左上角在屏幕上的的 x 坐标和 y 坐标。 IE、 Safari、 Chrome 和 Opera 支持 screenLeft 和 screenTop， 而 Chrome、 Firefox 和 Safari 支持 screenX 和 screenY。</td></tr></tbody></table> <table><thead><tr><th>方法</th> <th>描述</th></tr></thead> <tbody><tr><td>alert()</td> <td>显示带有一段消息和一个确认按钮的警告框。</td></tr> <tr><td>blur()</td> <td>把键盘焦点从顶层窗口移开。</td></tr> <tr><td>confirm()</td> <td>显示带有一段消息以及确认按钮和取消按钮的对话框。</td></tr> <tr><td>createPopup()</td> <td>创建一个弹出窗口。 只有 ie 支持（不包括 ie11）</td></tr> <tr><td>focus()</td> <td>把键盘焦点给予一个窗口。</td></tr> <tr><td>moveBy()</td> <td>可相对窗口的当前坐标把它移动指定的像素。</td></tr> <tr><td>moveTo()</td> <td>把窗口的左上角移动到一个指定的坐标。</td></tr> <tr><td>open()</td> <td>打开一个新的浏览器窗口或查找一个已命名的窗口。 window.open(URL,name,features,replace)</td></tr> <tr><td>print()</td> <td>打印当前窗口的内容。</td></tr> <tr><td>prompt()</td> <td>显示可提示用户输入的对话框。</td></tr> <tr><td>resizeBy()</td> <td>按照指定的像素调整窗口的大小。</td></tr> <tr><td>resizeTo()</td> <td>把窗口的大小调整到指定的宽度和高度。</td></tr> <tr><td>scrollBy()</td> <td>按照指定的像素值来滚动内容。</td></tr> <tr><td>scrollTo()</td> <td>把内容滚动到指定的坐标。</td></tr> <tr><td>setInterval()</td> <td>按照指定的周期（以毫秒计） 来调用函数或计算表达式。</td></tr> <tr><td>setTimeout()</td> <td>在指定的毫秒数后调用函数或计算表达式。</td></tr> <tr><td>clearInterval()</td> <td>取消由 setInterval() 设置的 timeout。</td></tr> <tr><td>clearTimeout()</td> <td>取消由 setTimeout() 方法设置的 timeout。close() 关闭浏览器窗口</td></tr></tbody></table> <h3 id="navigator-对象"><a href="#navigator-对象" class="header-anchor">#</a> Navigator 对象</h3> <p>Navigator 对象包含的属性描述了正在使用的浏览器。 可以使用这些属性进行平台专用的配置。 虽然这个对象的名称显而易见的是 Netscape 的 Navigator 浏览器， 但其他实现了 JavaScript 的浏览器也支持这个对象。</p> <table><thead><tr><th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>appCodeName</td> <td>返回浏览器的代码名。 以 Netscape 代码为基础的浏览器中， 它的值是 &quot;Mozilla&quot;。Microsoft 也是</td></tr> <tr><td>appMinorVersion</td> <td>返回浏览器的次级版本。 （IE4、 Opera 支持）</td></tr> <tr><td>appName</td> <td>返回浏览器的名称。</td></tr> <tr><td>appVersion</td> <td>返回浏览器的平台和版本信息。</td></tr> <tr><td>browserLanguage</td> <td>返回当前浏览器的语言。 （IE 和 Opera 支持）cookieEnabled 返回指明浏览器中是否启用 cookie 的布尔值。</td></tr> <tr><td>cpuClass</td> <td>返回浏览器系统的 CPU 等级。 （IE 支持）</td></tr> <tr><td>onLine</td> <td>返回指明系统是否处于脱机模式的布尔值。</td></tr> <tr><td>platform</td> <td>返回运行浏览器的操作系统平台。</td></tr> <tr><td>systemLanguage</td> <td>返回当前操作系统的默认语言。 （IE 支持）</td></tr> <tr><td>userAgent</td> <td>返回由客户机发送服务器的 user-agent 头部的值。</td></tr> <tr><td>userLanguage</td> <td>返回操作系统设定的自然语言。 （IE 和 Opera 支持）</td></tr> <tr><td>plugins</td> <td>返回包含客户端安装的所有插件的数组</td></tr></tbody></table> <table><thead><tr><th>方法</th> <th>描述</th></tr></thead> <tbody><tr><td>javaEnabled()</td> <td>规定浏览器是否支持并启用了 Java。</td></tr> <tr><td>taintEnabled()</td> <td>规定浏览器是否启用数据污点 (data tainting)。</td></tr></tbody></table> <h3 id="screen-对象"><a href="#screen-对象" class="header-anchor">#</a> Screen 对象</h3> <p>Screen 对象包含有关客户端显示屏幕的信息。 每个 Window 对象的 screen 属性都引用一个 Screen 对象。 Screen 对象中存放着有关显示浏览器屏幕的信息。 JavaScript 程序将利用这些信息来优化它们的输出， 以达到用户的显示要求。 例如，一个程序可以根据显示器的尺寸选择使用大图像还是使用小图像，它还可以根据显示器的颜色深度选择使用 16 位色还是使用 8 位色的图形。 另外，JavaScript 程序还能根有关屏幕尺寸的信息将新的浏览器窗口定位在屏幕中间。</p> <table><thead><tr><th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>availHeight</td> <td>返回显示屏幕的高度 (除 Windows 任务栏之外)。</td></tr> <tr><td>availWidth</td> <td>返回显示屏幕的宽度 (除 Windows 任务栏之外)。</td></tr> <tr><td>bufferDepth</td> <td>设置或返回调色板的比特深度。 （仅 IE 支持）colorDepth 返回目标设备或缓冲器上的调色板的比特深度。</td></tr> <tr><td>deviceXDPI</td> <td>返回显示屏幕的每英寸水平点数。 （仅 IE 支持）</td></tr> <tr><td>deviceYDPI</td> <td>返回显示屏幕的每英寸垂直点数。 （仅 IE 支持）</td></tr> <tr><td>fontSmoothingEnabled</td> <td>返回用户是否在显示控制面板中启用了字体平滑。 （仅 IE 支持）</td></tr> <tr><td>height</td> <td>返回显示屏幕的高度。</td></tr> <tr><td>logicalXDPI</td> <td>返回显示屏幕每英寸的水平方向的常规点数。 （仅 IE 支持）</td></tr> <tr><td>logicalYDPI</td> <td>返回显示屏幕每英寸的垂直方向的常规点数。 （仅 IE 支持）</td></tr> <tr><td>pixelDepth</td> <td>返回显示屏幕的颜色分辨率（比特每像素） 。</td></tr> <tr><td>updateInterval</td> <td>设置或返回屏幕的刷新率。 （仅 IE11 以下支持）</td></tr> <tr><td>width</td> <td>返回显示器屏幕的宽度。</td></tr></tbody></table> <h3 id="offsetwidth-offsetheight-clientwidth-clientheight-与-scrollwidth-scrollheight-的区别"><a href="#offsetwidth-offsetheight-clientwidth-clientheight-与-scrollwidth-scrollheight-的区别" class="header-anchor">#</a> offsetWidth/offsetHeight,clientWidth/clientHeight 与 scrollWidth/scrollHeight 的区别</h3> <ul><li>offsetWidth/offsetHeight 返回值包含 content + padding + border，效果与 e.getBoundingClientRect()相同</li> <li>clientWidth/clientHeight 返回值只包含 content + padding，如果有滚动条，也不包含滚动条</li> <li>scrollWidth/scrollHeight 返回值包含 content + padding + 溢出内容的尺寸</li></ul> <h2 id="dom"><a href="#dom" class="header-anchor">#</a> <strong>DOM</strong></h2> <p><a href="https://blog.csdn.net/Night_Emperor/article/details/78471051" target="_blank" rel="noopener noreferrer">DOM 操作<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="dom-事件级别"><a href="#dom-事件级别" class="header-anchor">#</a> DOM 事件级别</h3> <ul><li>DOM0
<ul><li>onXXX 类型的定义事件</li> <li>element.onclick = function(e) { ... }</li></ul></li> <li>DOM2
<ul><li>addEventListener 方式</li> <li>element.addEventListener('click', function (e) { ... })</li> <li>btn.removeEventListener('click', func, false)</li> <li>btn.attachEvent(&quot;onclick&quot;, func);</li> <li>btn.detachEvent(&quot;onclick&quot;, func);</li></ul></li> <li>DOM3
<ul><li>增加了很多事件类型</li> <li>element.addEventListener('keyup', function (e) { ... })</li> <li>eventUtil 是自定义对象，textInput 是 DOM3 级事件</li></ul></li></ul> <h3 id="event-对象常见应用"><a href="#event-对象常见应用" class="header-anchor">#</a> Event 对象常见应用</h3> <ul><li>event.target
<ul><li>触发事件的元素</li></ul></li> <li>event.currentTarget
<ul><li>绑定事件的元素</li></ul></li> <li>event.preventDefault()
<ul><li>阻止默认行为</li> <li>event.cancelBubble()和 event.preventBubble 都已经废弃</li></ul></li> <li>event.stopPropagation()
<ul><li>阻止在捕获阶段或冒泡阶段继续传播，而不是阻止冒泡</li></ul></li> <li>event.stopImmediatePropagation()
<ul><li>阻止事件冒泡并且阻止相同事件的其他侦听器被调用。</li></ul></li></ul> <h3 id="事件代理-委托"><a href="#事件代理-委托" class="header-anchor">#</a> 事件代理/委托</h3> <p>事件代理（Event Delegating），又称之为事件委托。是指将事件绑定到目标元素的父元素上，利用冒泡机制触发该事件</p> <p>优点：</p> <ul><li>可以减少事件注册，节省大量内存占用</li> <li>可以将事件应用于动态添加的子元素上</li></ul> <p>但使用不当会造成事件在不应该触发时触发</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>div1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>##<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>a1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>##<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>a2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>##<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>a3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>##<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>a4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> div1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;div1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>div1<span class="token punctuation">,</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//防止跳转</span>
  <span class="token keyword">const</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>nodeName <span class="token operator">===</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="如何阻止冒泡？"><a href="#如何阻止冒泡？" class="header-anchor">#</a> 如何阻止冒泡？</h3> <p>IE 只事件冒泡，不支持事件捕获</p> <ul><li>阻止事件冒泡：</li></ul> <p>W3C: stopPropagation();</p> <p>IE: e.cancelBubble=true;</p> <p>写法 :</p> <p>window.event ? window.event.cancelBubble=true:e.stop(Propagation)</p> <ul><li>取消默认事件</li></ul> <p>W3C：preventDefault()</p> <p>IE: e.returnValue:false;</p> <ul><li>阻止默认行为：</li></ul> <p>return false</p> <p>原生的 js 会阻止默认行为，但会继续冒泡；</p> <p>jquery 会阻止默认行为，并停止冒泡。</p> <h3 id="js-获取-dom-的-css-样式"><a href="#js-获取-dom-的-css-样式" class="header-anchor">#</a> JS 获取 dom 的 CSS 样式</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> attr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>currentStyle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">.</span>currentStyle<span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://blog.csdn.net/qq_37746973/article/details/80748879" target="_blank" rel="noopener noreferrer">JS 实现鼠标拖拽<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="innerhtml、textcontent、innerhtml"><a href="#innerhtml、textcontent、innerhtml" class="header-anchor">#</a> innerHTML、textContent、innerHTML</h3> <ol><li><p>textContent 属性可以获取指定节点的文本及其后代节点中文本内容，也包括<code>&lt;script&gt;</code>和<code>&lt;style&gt;</code>元素中的内容 ，innerText 也是获取指定节点的文本及其后代节点中文本内容，但不能获取<code>&lt;script&gt;</code>和<code>&lt;style&gt;</code>元素中的内容，
innerHTML 是获取 HTML 文本结构内容</p></li> <li><p>textContent 会获取 display:none 的节点的文本；innerText 不作返回。</p></li> <li><p>由于  innerText  受  CSS 样式的影响，它会触发重排（reflow），但 textContent  不会</p></li> <li><p>textContent 会显示空格和回车，innerText 只显示文本</p></li></ol> <h2 id="原型与原型链"><a href="#原型与原型链" class="header-anchor">#</a> <strong>原型与原型链</strong></h2> <p>JavaScript 是使用构造函数来新建一个对象的，每一个构造函数的内部都有一个 prototype 属性值，这个属性值是一个对
象，这个对象包含了该构造函数的所有实例共享的属性和方法。当我们使用构造函数新建一个对象后，在这个对象的内部
将包含一个 proto 属性，这个属性指向构造函数的 prototype。</p> <p>当我们访问一个对象的属性时，如果这个对象内部不存在这个属性，那么它就会去它的原型对象里找这个属性，这个原型对象又
会有自己的原型，于是就这样一直找下去，也就是原型链的概念。原型链的尽头一般来说都是 Object.prototype 所以这就
是我们新建的对象为什么能够使用 toString() 等方法的原因。</p> <p><a href="https://blog.csdn.net/cc18868876837/article/details/81211729" target="_blank" rel="noopener noreferrer">帮你彻底搞懂 JS 中的 prototype、proto 与 constructor（图解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="获取原型的方法"><a href="#获取原型的方法" class="header-anchor">#</a> 获取原型的方法</h3> <p><code>p.__proto__</code></p> <p><code>p.constructor.prototype</code></p> <p><code>Object.getPrototypeOf(p)</code></p> <h3 id="instanceof-原理"><a href="#instanceof-原理" class="header-anchor">#</a> instanceof 原理</h3> <p>判断实例对象的<code>__proto__</code>属性与构造函数的 <code>prototype</code> 是不是用一个引用。如果不是，沿着对象的<code>__proto__</code>向上查找的，直到顶端 Object</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">myInstanceof</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> a <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> a <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> b<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="new-原理"><a href="#new-原理" class="header-anchor">#</a> new 原理</h3> <ol><li>创建一个新的对象 obj;</li> <li>将这个空对象的<code>__proto__</code>指向了 fn 函数对象 prototype 成员对象</li> <li>fn 函数对象的 this 指针替换成 obj, 相当于执行了 fn.call(obj);</li> <li>如果构造函数显示的返回一个对象，那么则这个实例为这个返回的对象。 否则返回这个新创建的对象</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> constructor <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建一个空的对象并链接到构造函数的原型，使它能访问原型中的属性，等于 let obj = {};obj.__proto__ = constructor.prototype</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用apply改变构造函数中this的指向实现继承，使obj能访问到构造函数中的属性</span>
  <span class="token keyword">return</span> result <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token operator">?</span> result <span class="token operator">:</span> obj<span class="token punctuation">;</span> <span class="token comment">// 优先返回构造函数返回的对象</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="求输出结果："><a href="#求输出结果：" class="header-anchor">#</a> 求输出结果：</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">&quot;Object&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">&quot;Function&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token class-name">__proto__</span><span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token class-name">__proto__</span><span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token class-name">__proto__</span><span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="继承"><a href="#继承" class="header-anchor">#</a> <strong>继承</strong></h2> <p><a href="https://www.cnblogs.com/humin/p/4556820.html" target="_blank" rel="noopener noreferrer">js 手写继承 6 种方式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="原型链继承"><a href="#原型链继承" class="header-anchor">#</a> 原型链继承</h3> <p>原理：让父类的属性和方法在子类实例的原型链上
CHILD.prototype = new PARENT();
CHILD.prototype.constructor = CHILD;</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getX</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">////////////////////////</span>
<span class="token class-name">B</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> <span class="token constant">B</span><span class="token punctuation">;</span>
<span class="token comment">////////////////////////</span>
<span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getY</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//100</span>
b<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//200</span>
b<span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token comment">//100</span>
b<span class="token punctuation">.</span>y<span class="token punctuation">;</span> <span class="token comment">//200</span>
</code></pre></div><p><img src="/assets/img/%E5%8E%9F%E5%9E%8B%E9%93%BE%E7%BB%A7%E6%89%BF.png" alt=""></p> <p>特点：</p> <ol><li>不像其他语言中的继承一样（其它语言的继承一般是拷贝继承，也就是子类继承父类，会把父类的属性和方法拷贝到一份到子类中，供子类的实例调取使用），它是把父类的原型放到子类实例的原型链上，实例想调取这些方法，是基于<code>__proto__</code>原型链查找机制完成的</li> <li>子类可以重写父类的方法（这样会导致父类其它的实例也受到影响）</li> <li>父类中私有或公有的属性和方法，最后都会变为子类中公有的属性方法</li></ol> <h3 id="构造继承"><a href="#构造继承" class="header-anchor">#</a> 构造继承</h3> <p>原理：CHILD 私有方法中把 PARENT 当作普通函数执行，让 PARENT 中的 THIS 指向 CHILD 实例，相当于给 CHILD 的实例设置了很多私有属性方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getX</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
  <span class="token comment">////////////////////////</span>
  <span class="token constant">A</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">////////////////////////</span>
<span class="token punctuation">}</span>
<span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getY</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token comment">//100</span>
b<span class="token punctuation">.</span>y<span class="token punctuation">;</span> <span class="token comment">//200</span>
b<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//TypeError: b.getX is not a function</span>
b<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//200</span>
</code></pre></div><p>特点：</p> <ol><li>只能继承父类私有的属性或方法（因为是把 PARENT 当作普通函数执行，和其原型上的属性方法没有关系）</li> <li>父类私有的变为子类私有的</li></ol> <h3 id="组合继承"><a href="#组合继承" class="header-anchor">#</a> 组合继承</h3> <p>可以继承实例属性和方法，也可以继承原型属性和方法 缺点: 调用两次父类构造函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getX</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
  <span class="token comment">////////////////////////</span>
  <span class="token constant">A</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">////////////////////////</span>
<span class="token punctuation">}</span>
<span class="token comment">////////////////////////</span>
<span class="token class-name">B</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> <span class="token constant">B</span><span class="token punctuation">;</span>
<span class="token comment">////////////////////////</span>
<span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getY</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//100</span>
b<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//200</span>
b<span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token comment">//100</span>
b<span class="token punctuation">.</span>y<span class="token punctuation">;</span> <span class="token comment">//200</span>
</code></pre></div><h3 id="寄生组合继承"><a href="#寄生组合继承" class="header-anchor">#</a> 寄生组合继承</h3> <p>原理：
构造继承+类似于原型继承</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getX</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
  <span class="token comment">////////////////////////</span>
  <span class="token constant">A</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">////////////////////////</span>
<span class="token punctuation">}</span>
<span class="token comment">////////////////////////</span>
<span class="token class-name">B</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> <span class="token constant">B</span><span class="token punctuation">;</span>
<span class="token comment">////////////////////////</span>
<span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getY</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//100</span>
b<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//200</span>
b<span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token comment">//100</span>
b<span class="token punctuation">.</span>y<span class="token punctuation">;</span> <span class="token comment">//200</span>
</code></pre></div><p><img src="/assets/img/%E5%AF%84%E7%94%9F%E7%BB%84%E5%90%88%E7%BB%A7%E6%89%BF.png" alt=""></p> <p>特点：父类私有和公有的分别是子类实例的私有和公有属性方法（推荐）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//Object.create(obj):创建一个空对象，让空对象__proto__指向obj</span>
Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="es6-继承"><a href="#es6-继承" class="header-anchor">#</a> ES6 继承</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//=&gt;B.prototype.__proto__=A.prototype</span>
<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//子类只要继承父类，可以不写CONSTRUCTOR，一旦写了，则在CONSTRUCTOR中第一句话必须是SUPER()</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=&gt;A.call(this,100) 把父类当作普通方法执行，给方法传递参数，让方法中的THIS是子类的实例</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//100</span>
b<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//200</span>
b<span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token comment">//100</span>
b<span class="token punctuation">.</span>y<span class="token punctuation">;</span> <span class="token comment">//200</span>
</code></pre></div><h2 id="ajax"><a href="#ajax" class="header-anchor">#</a> <strong>AJAX</strong></h2> <h3 id="手写-ajax"><a href="#手写-ajax" class="header-anchor">#</a> 手写 ajax</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequester</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">404</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;404 Not Found&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">;</span>
<span class="token function">ajax</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ajax-和-fetch-区别"><a href="#ajax-和-fetch-区别" class="header-anchor">#</a> AJAX 和 fetch 区别</h3> <ol><li>AJAX 和 Fetch 发送同源请求时都默认携带 Cookie，跨域请求则都默认不携带 Cookie。</li></ol> <p>当我们使用 CORS 来进行跨域的时候，若想使其携带 Cookie。</p> <p>服务端设置</p> <div class="language- extra-class"><pre class="language-text"><code>Access-Control-Allow-Credentials: true
若想要使我们的 Ajax 或 Fetch 携带 Cookie，只需如此。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Ajax</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span class="token comment">// Fetch</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  credentials<span class="token operator">:</span> <span class="token string">&quot;include&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Fetch 的 credentials 属性，默认值为 same-origin，想要跨域发送 Cookie 则设置为 include</p> <ul><li>omit: 从不发送 cookies.</li> <li>same-origin: 只有当 URL 与响应脚本同源才发送 cookies、 HTTP Basic authentication 等验证信息.(浏览器默认值,在旧版本浏览器，例如 safari 11 依旧是 omit，safari 12 已更改)</li> <li>include: 不论是不是跨域的请求,总是发送请求资源域在本地的 cookies、 HTTP Basic authentication 等验证信息.</li></ul> <ol start="2"><li>ajax 原生支持 abort，fetch 需要使用 AbortController 才能实现 abort</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ajax</span>
xhr<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// fetch</span>
<span class="token keyword">let</span> controller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AbortController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> signal <span class="token operator">=</span> controller<span class="token punctuation">.</span>signal<span class="token punctuation">;</span>

<span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  signal
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

controller<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>fetch 不支持超时控制 timeout</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ajax 的超时控制</span>
xhr<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">ontimeout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>我们如何实现 fetch 的超时控制</p> <div class="language- extra-class"><pre class="language-text"><code>Promise.race([
fetch(url),
new Promise((resolve, reject) =&gt; {
setTimeout(() =&gt; reject(new Error(&quot;request timeout&quot;)), 2000)
})
])
.then(data =&gt; {}) // 请求成功
.catch(reason =&gt; {}) // 请求失败
</code></pre></div><ol start="4"><li>fetch 无法检测请求的进度(onprogress)</li></ol> <h2 id="es6"><a href="#es6" class="header-anchor">#</a> <strong>ES6</strong></h2> <h3 id="常用-es6-新特性"><a href="#常用-es6-新特性" class="header-anchor">#</a> 常用 ES6 新特性</h3> <ul><li>let、const</li> <li>解构赋值</li> <li>字符串 Unicode 扩展、模板字符串<code>${}</code></li> <li>箭头函数</li> <li>参数默认值<code>function(value=&quot;default&quot;)</code></li> <li><code>for-of</code>和<code>for-in</code></li> <li><code>class</code>语法糖</li> <li><code>Promise</code></li></ul> <h3 id="set-map"><a href="#set-map" class="header-anchor">#</a> Set Map</h3> <h4 id="set"><a href="#set" class="header-anchor">#</a> Set</h4> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Set" target="_blank" rel="noopener noreferrer">Set<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Set 函数可以接受一个数组（或者具有 iterable 接口的其他数据结构）作为参数，用来初始化。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 去除数组的重复成员</span>
<span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token string">'ababbc'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;abc&quot;</span>
</code></pre></div><p>Set 内部判断两个值是否不同，类似于精确相等运算符（===），主要的区别是向 Set 加入值时认为 NaN 等于自身，而精确相等运算符认为 NaN 不等于自身。</p> <p>Set 结构的实例有以下属性:</p> <p><code>Set.prototype.constructor</code>：构造函数，默认就是 Set 函数。
<code>Set.prototype.size</code>：返回 Set 实例的成员总数。</p> <p>Set 实例的方法分为两大类：操作方法（用于操作数据）和遍历方法（用于遍历成员）。</p> <p>操作方法:</p> <p><code>Set.prototype.add(value)</code>：添加某个值，返回 Set 结构本身。
<code>Set.prototype.delete(value)</code>：删除某个值，返回一个布尔值，表示删除是否成功。
<code>Set.prototype.has(value)</code>：返回一个布尔值，表示该值是否为 Set 的成员。
<code>Set.prototype.clear()</code>：清除所有成员，没有返回值。</p> <p>遍历方法:</p> <p><code>Set.prototype.keys()</code>：返回键名的遍历器
<code>Set.prototype.values()</code>：返回键值的遍历器
<code>Set.prototype.entries()</code>：返回键值对的遍历器
<code>Set.prototype.forEach()</code>：使用回调函数遍历每个成员</p> <h4 id="map"><a href="#map" class="header-anchor">#</a> Map</h4> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="noopener noreferrer">Map<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
类似于对象，是键值对的集合，但普通的对象的键只能是字符串，Map 的键可以不是</p> <h4 id="weakset-weakmap"><a href="#weakset-weakmap" class="header-anchor">#</a> WeakSet / WeakMap</h4> <p>WeakSet 的成员只能是对象。其次，WeakSet 中的对象都是弱引用。</p> <p>WeakMap 只接受对象作为键名。其次，WeakMap 中的键名所指向的对象都是弱引用。</p> <p>弱引用指的是不被在引用计数中被计数的引用。</p> <p>JavaScript 垃圾回收是一种内存管理技术。在这种技术中，不再被引用的对象会被自动删除，而与其相关的资源也会被一同回收。</p> <p>Map 和 Set 中对象的引用都是强类型化的，并不会允许垃圾回收。这样一来，如果 Map 和 Set 中引用了不再需要的大型对象，如已经从 DOM 树中删除的 DOM 元素，那么其回收代价是昂贵的。</p> <p>为了解决这个问题，ES6 还引入了另外两种新的数据结构，即称为 WeakMap 和 WeakSet 的弱集合。这些集合之所以是“弱的”，是因为它们允许从内存中清除不再需要的被这些集合所引用的对象。</p> <p><a href="https://blog.csdn.net/weixin_38382659/article/details/93386960" target="_blank" rel="noopener noreferrer">WeakMap 的学习与应用场景<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="var、let-及-const-区别"><a href="#var、let-及-const-区别" class="header-anchor">#</a> var、let 及 const 区别</h3> <ul><li>全局声明的 var 变量会挂载在 window 上，而 let 和 const 不会</li> <li>var 声明变量存在变量提升，let 和 const 不会</li> <li>let、const 的作用范围是块级作用域，而 var 的作用范围是函数作用域</li> <li>同一作用域下 let 和 const 不能声明同名变量，而 var 可以</li> <li>同一作用域下在 let 和 const 声明前使用会存在暂时性死区</li> <li>const
<ul><li>一旦声明必须赋值,不能使用 null 占位</li> <li>声明后不能再修改</li> <li>如果声明的是引用数据，可以修改其属性</li></ul></li></ul> <h3 id="es6-中箭头函数与普通函数的区别"><a href="#es6-中箭头函数与普通函数的区别" class="header-anchor">#</a> ES6 中箭头函数与普通函数的区别</h3> <ul><li><p>函数体内的 this 对象，就是定义时所在的对象，而不是使用时所在的对象。</p></li> <li><p>不可以当作构造函数，也就是说，不可以使用 new 命令，否则会抛出一个错误。</p></li> <li><p>不可以使用 arguments 对象，该对象在函数体内不存在。如果要用，可以用 rest 参数代替。</p></li> <li><p>不可以使用 yield 命令，因此箭头函数不能用作 Generator 函数。</p></li> <li><p>函数声明在变量提升中是最高的，箭头函数没有函数提升</p></li> <li><p>call 和 apply 方法只有参数，没有作用域</p></li></ul> <h3 id="for-in-和-for-of"><a href="#for-in-和-for-of" class="header-anchor">#</a> for in 和 for of</h3> <p><a href="https://www.cnblogs.com/zjx304/p/10687017.html" target="_blank" rel="noopener noreferrer">for in 和 for of 的区别<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>遍历数组</p> <p>foreach:使用 foreach 遍历数组的话，使用 break 不能中断循环，使用 return 也不能返回到外层函数。</p> <p>for in:</p> <ul><li>index 索引为字符串型数字，不能直接进行几何运算</li> <li>遍历顺序有可能不是按照实际数组的内部顺序</li> <li>使用 for in 会遍历数组所有的可枚举属性，包括原型。例如上栗的原型方法 method 和 name 属性</li></ul> <p>for of:遍历的是数组元素值</p> <p>遍历对象</p> <p>for in:
for in 可以遍历到 myObject 的原型方法 method,如果不想遍历原型方法和属性的话，可以在循环内部判断一下,hasOwnPropery 方法可以判断某属性是否是该对象的实例属性,同样可以通过 ES5 的 Object.keys(myObject)获取对象的实例属性组成的数组，不包括原型方法和属性</p> <p>for of:
for..of 适用遍历数/数组对象/字符串/map/set 等拥有迭代器对象的集合.但是不能遍历普通对象,因为没有迭代器对象</p> <h3 id="promise"><a href="#promise" class="header-anchor">#</a> Promise</h3> <p><a href="https://juejin.im/post/5e58c618e51d4526ed66b5cf" target="_blank" rel="noopener noreferrer">要就来 45 道 Promise 面试题一次爽到底(1.1w 字用心整理)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://juejin.im/post/5b2f02cd5188252b937548ab##heading-0" target="_blank" rel="noopener noreferrer">BAT 前端经典面试问题：史上最最最详细的手写 Promise 教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Promise 对象是异步编程的一种解决方案，克服了回调地狱的问题</p> <p>Promises/A+ 规范是 JavaScript Promise 的标准，规定了一个 Promise 所必须具有的特性。</p> <p>Promise 是一个构造函数，接收一个函数作为参数，返回一个 Promise 实例。一个 Promise 实例有三种状态，分别是 pendi
ng、resolved 和 rejected，分别代表了进行中、已成功和已失败。实例的状态只能由 pending 转变 resolved 或者 reje
cted 状态，并且状态一经改变，就无法再被改变了。状态的改变是通过 resolve() 和 reject() 函数来实现的，我们
可以在异步操作结束后调用这两个函数改变 Promise 实例的状态，它的原型上定义了一个 then 方法，使用这个 then 方法可以
为两个状态的改变注册回调函数。这个回调函数属于微任务，会在本轮事件循环的末尾执行。</p> <h3 id="async-和-await"><a href="#async-和-await" class="header-anchor">#</a> async 和 await</h3> <p>一个函数如果加上 async ，那么该函数就会返回一个 Promise</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// -&gt; Promise {&lt;resolved&gt;: &quot;1&quot;}</span>
</code></pre></div><p>async 就是将函数返回值使用 Promise.resolve() 包裹了下，和 then 中处理返回值一样，并且 await 只能配套 async 使用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>async 和 await 可以说是异步终极解决方案了，相比直接使用 Promise 来说，优势在于处理 then 的调用链，能够更清晰准确的写出代码，毕竟写一大堆 then 也很恶心，并且也能优雅地解决回调地狱问题。</p> <p>当然也存在一些缺点，因为 <strong>await 将异步代码改造成了同步代码</strong>，如果多个异步代码没有依赖性却使用了 await 会导致性能上的降低。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 以下代码没有依赖性的话，完全可以使用 Promise.all 的方式</span>
  <span class="token comment">// 如果有依赖性的话，其实就是解决回调地狱的例子了</span>
  <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>看一个使用 await 的例子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  a <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token operator">++</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//先输出  ‘1’, 1</span>
<span class="token comment">//在输出  ‘2’, 10</span>
</code></pre></div><ul><li>首先函数 b 先执行，在执行到 await 10 之前变量 a 还是 0，因为 await 内部实现了 generator ，generator 会保留堆栈中东西，所以这时候 a = 0 被保存了下来</li> <li>因为 await 是异步操作，后来的表达式不返回 Promise 的话，就会包装成 Promise.reslove(返回值)，然后会去执行函数外的同步代码</li> <li>同步代码 a++ 与打印 a 执行完毕后开始执行异步代码，将保存下来的值拿出来使用，这时候 a = 0 + 10</li></ul> <p>上述解释中提到了 await 内部实现了 generator，其实 <strong>await 就是 generator 加上 Promise 的语法糖，且内部实现了自动执行 generator</strong>。</p> <h3 id="generator-生成器"><a href="#generator-生成器" class="header-anchor">#</a> Generator 生成器</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">yield</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token keyword">yield</span> y <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> it <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; {value: 6, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; {value: 8, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; {value: 42, done: true}</span>
</code></pre></div><ul><li><p>首先 Generator 函数调用和普通函数不同，它会返回一个迭代器</p></li> <li><p>当执行第一次 next 时，传参会被忽略，并且函数暂停在 yield (x + 1) 处，所以返回 5 + 1 = 6</p></li> <li><p>当执行第二次 next 时，传入的参数等于上一个 yield 的返回值，如果你不传参，yield 永远返回 undefined。此时 let y = 2 _ 12，所以第二个 yield 等于 2 _ 12 / 3 = 8</p></li> <li><p>当执行第三次 next 时，传入的参数会传递给 z，所以 z = 13, x = 5, y = 24，相加等于 42</p></li></ul> <h3 id="生成器原理"><a href="#生成器原理" class="header-anchor">#</a> 生成器原理</h3> <p>当 yeild 产生一个值后，生成器的执行上下文就会从栈中弹出。但由于迭代器一直保持着队执行上下文的引用，上下文不会丢失，不会像普通函数一样执行完后上下文就被销毁</p> <h3 id="proxy"><a href="#proxy" class="header-anchor">#</a> Proxy</h3> <h3 id="私有方法和私有属性"><a href="#私有方法和私有属性" class="header-anchor">#</a> 私有方法和私有属性</h3> <p><a href="https://es6.ruanyifeng.com/?search=%E7%A7%81%E6%9C%89&amp;x=0&amp;y=0##docs/class##%E7%A7%81%E6%9C%89%E6%96%B9%E6%B3%95%E5%92%8C%E7%A7%81%E6%9C%89%E5%B1%9E%E6%80%A7" target="_blank" rel="noopener noreferrer">阮老师 | ES6 入门<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="现有的解决方案"><a href="#现有的解决方案" class="header-anchor">#</a> 现有的解决方案</h4> <p>私有方法和私有属性，是只能在类的内部访问的方法和属性，外部不能访问。这是常见需求，有利于代码的封装，但 ES6 不提供，只能通过变通方法模拟实现。</p> <p>一种做法是在命名上加以区别，即在函数名或属性名前加<code>_</code>，但这并不安全，只是一种团队规范。</p> <p>另一种方法就是索性<strong>将私有方法移出类，放到模块里</strong>，因为模块内部的所有方法都是对外可见的。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Widget</span> <span class="token punctuation">{</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">baz</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">bar</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> baz<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">baz</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>snaf <span class="token operator">=</span> baz<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面代码中，foo 是公开方法，内部调用了 bar.call(this, baz)。这使得 bar 实际上成为了当前模块的私有方法。</p> <p>还有一种方法是利用<strong>Symbol 值的唯一性</strong>，将私有方法的名字命名为一个 Symbol 值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> snaf <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;snaf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">myClass</span> <span class="token punctuation">{</span>
  <span class="token comment">// 公有方法</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">baz</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">[</span>bar<span class="token punctuation">]</span><span class="token punctuation">(</span>baz<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 私有方法</span>
  <span class="token punctuation">[</span>bar<span class="token punctuation">]</span><span class="token punctuation">(</span>baz<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>snaf<span class="token punctuation">]</span> <span class="token operator">=</span> baz<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面代码中，bar 和 snaf 都是 Symbol 值，一般情况下无法获取到它们，因此达到了私有方法和私有属性的效果。但是也不是绝对不行，Reflect.ownKeys()依然可以拿到它们。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> inst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">myClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>myClass<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [ 'constructor', 'foo', Symbol(bar) ]</span>
</code></pre></div><h3 id="代码分析题"><a href="#代码分析题" class="header-anchor">#</a> 代码分析题</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> z <span class="token operator">=</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> x<span class="token punctuation">;</span>
  <span class="token keyword">await</span> y<span class="token punctuation">;</span>
  <span class="token keyword">await</span> z<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>答案： 输出耗时： 1 秒多一点点。
原因： 3 个 wait 函数在赋值的时候就已经开始执行了。</p> <p>稍微改造一下就可以得到 3 * 1000 ms 以上的结果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> z <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://www.cnblogs.com/zhuanzhuanfe/p/7493433.html" target="_blank" rel="noopener noreferrer">10 分钟学会 ES7+ES8<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="es2020"><a href="#es2020" class="header-anchor">#</a> <strong>ES2020</strong></h2> <h3 id="globalthis"><a href="#globalthis" class="header-anchor">#</a> globalThis</h3> <h2 id="事件"><a href="#事件" class="header-anchor">#</a> <strong>事件</strong></h2> <h3 id="事件触发三阶段"><a href="#事件触发三阶段" class="header-anchor">#</a> 事件触发三阶段</h3> <p><a href="%22./%E4%BA%8B%E4%BB%B6%E6%B5%81%E7%A8%8B.html%22">事件流程</a></p> <p>事件触发有三个阶段：</p> <ul><li>捕获阶段：windows 往事件触发处传播，遇到注册的捕获事件会触发</li> <li>目标阶段：传播到事件触发处时触发注册的事件</li> <li>冒泡阶段：从事件触发处往 windows 传播，遇到注册的冒泡事件会触发</li></ul> <p>事件触发一般来说会按照上面的顺序进行，但是也有特例，如果给一个 body 中的子节点同时注册冒泡和捕获事件，事件触发会按照注册的顺序执行。</p> <h3 id="注册事件"><a href="#注册事件" class="header-anchor">#</a> 注册事件</h3> <p>通常使用 addEventListener 注册事件，该函数的第三个参数可以是布尔值，也可以是对象。第三个参数默认值为 false，决定了注册的事件是捕获事件（ture 为）还是冒泡事件。</p> <p>一般来说，如果我们只希望事件只触发在目标上，这时候可以使用 stopPropagation 来阻止事件的进一步传播。</p> <p>通常我们认为 stopPropagation 是用来阻止事件冒泡的，其实该函数也可以阻止捕获事件。</p> <p>GstopImmediatePropagation 同样也能实现阻止事件，但是还能阻止该事件目标执行别的注册事件。</p> <h3 id="target-和-currenttarget"><a href="#target-和-currenttarget" class="header-anchor">#</a> target 和 currentTarget</h3> <p>target 是触发事件的某个具体的对象，只会出现在事件机制的目标阶段，谁触发了事件，谁就是 target 。</p> <p>currentTarget 是绑定事件的对象。</p> <h3 id="onxxxx-事件与-addeventlistener-的区别"><a href="#onxxxx-事件与-addeventlistener-的区别" class="header-anchor">#</a> onXXXX 事件与 addeventlistener 的区别</h3> <h4 id="用法"><a href="#用法" class="header-anchor">#</a> 用法</h4> <p>onXXXX：</p> <ol><li></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>obj<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//do Something...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>obj<span class="token punctuation">.</span>onclick<span class="token operator">=</span>fn<span class="token punctuation">;</span>
<span class="token keyword">function</span> fn <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//do Something...</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>当函数 fn 有参数的情况下使用匿名函数来传参</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>obj<span class="token punctuation">.</span><span class="token function-variable function">onclick</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">fn</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token comment">//doSomething</span>
<span class="token punctuation">}</span>
</code></pre></div><p>!&gt; 错误写法：</p> <div class="language-js extra-class"><pre class="language-js"><code>obj<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这样写函数会立即执行，不会等待点击触发。</p> <p>addEventListener:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">addEventListener</span><span class="token punctuation">(</span>Event<span class="token punctuation">,</span> functionName<span class="token punctuation">,</span> useCapture<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Event:事件的类型，如`click`</span>
<span class="token comment">//functionName:方法名</span>
<span class="token comment">//useCapture:布尔值，指定是在捕获或者冒泡阶段执行</span>
<span class="token comment">//true-事件句柄在捕获阶段执行</span>
<span class="token comment">//false-(默认)冒泡阶段</span>
</code></pre></div><ol><li></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>obj<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">//do something</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>没参数可以直接写函数名</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>   obj<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span>fn<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   funciton <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">//do something..</span>
   <span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>函数有参数时需要使用匿名函数来传递参数</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>   obj<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>param<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>区别：</p> <ol><li><p>onXXXX 事件会被之后创建的相同的 onXXXX 事件覆盖,addEventListener 不会</p></li> <li><p>onXXXX 不能设置捕获和冒泡那个优先，</p></li> <li><p>onXXXX 无法自定义事件，addEventListener 可以</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>obj<span class="token punctuation">.</span><span class="token function">addEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> funtionName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//event:事件类型（需要写成“onclick”前面加 on，这个与 addEventListener 不同）</span>
<span class="token comment">//funtionName:方法名（要参数是也是需要使用匿名函数来传参）</span>
</code></pre></div><h3 id="取消默认操作"><a href="#取消默认操作" class="header-anchor">#</a> 取消默认操作</h3> <p><a href="https://wiki.jikexueyuan.com/project/brief-talk-js/event-cancellation-and-prevent-bubbles.html" target="_blank" rel="noopener noreferrer">取消默认操作<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>取消默认操作
w3c 的方法是 e.preventDefault()，IE 则是使用 e.returnValue = false;</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">cancelHandler</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> event <span class="token operator">=</span> event <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span> <span class="token comment">//用于IE</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>preventDefault<span class="token punctuation">)</span> event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//标准技术</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>returnValue<span class="token punctuation">)</span> event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//IE</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//用于处理使用对象属性注册的处理程序</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> <strong>正则表达式</strong></h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener noreferrer">正则表达式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="设计模式"><a href="#设计模式" class="header-anchor">#</a> <strong>设计模式</strong></h2> <h3 id="单例模式"><a href="#单例模式" class="header-anchor">#</a> 单例模式</h3> <p>一个类只有一个实例</p> <h3 id="观察者模式和发布订阅模式"><a href="#观察者模式和发布订阅模式" class="header-anchor">#</a> 观察者模式和发布订阅模式</h3> <p><img src="/assets/img/%E8%A7%82%E5%AF%9F%E8%80%85%E5%92%8C%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E8%80%85.png" alt=""></p> <p>发布订阅模式其实属于广义上的观察者模式</p> <p>在观察者模式中，观察者需要直接订阅目标事件。在目标发出内容改变的事件后，直接接收事件并作出响应。</p> <p>而在发布订阅模式中，发布者和订阅者之间多了一个调度中心。调度中心一方面从发布者接收事件，另一方面向订阅者发布事件，订
阅者需要在调度中心中订阅事件。通过调度中心实现了发布者和订阅者关系的解耦。使用发布订阅者模式更利于我们代码的可维护性。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">events</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>topics <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>topics<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>topics<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    topics<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 发布事件，触发观察者回调事件</span>
  <span class="token function">publish</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>topics<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>topics<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 移除主题的一个观察者的回调事件</span>
  <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>topics<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>topics<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>topics<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 移除主题的所有观察者的回调事件</span>
  <span class="token function">removeAll</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>topics<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      topics<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----></main> <!----> <div style="display:none;" data-v-418054de data-v-418054de><div class="comments-wrapper" data-v-418054de><!----></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-1e128e82 data-v-1e128e82><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-1e128e82><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-1e128e82></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-1e128e82></path></svg></div></div></div>
    <script src="/assets/js/app.8e528a8b.js" defer></script><script src="/assets/js/3.82a49c19.js" defer></script><script src="/assets/js/1.0ab98803.js" defer></script><script src="/assets/js/15.fa9dfeb1.js" defer></script>
  </body>
</html>
